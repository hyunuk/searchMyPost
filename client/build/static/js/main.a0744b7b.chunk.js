(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),r=a(24),s=a.n(r),i=(a(67),a(17)),o="SET_SEARCH_TERM",l="LOG_IN",u="LOG_OUT",j="MODE_CHANGE",d="SET_DB",h=function(e,t){switch(t.type){case o:return Object(i.a)(Object(i.a)({},e),{},{term:t.term});case l:return Object(i.a)(Object(i.a)({},e),{},{user:t.user});case u:return Object(i.a)(Object(i.a)({},e),{},{user:null});case j:return Object(i.a)(Object(i.a)({},e),{},{mode:t.mode});case d:return Object(i.a)(Object(i.a)({},e),{},{creationDate:t.creationDate,count:t.count});default:return e}},b=a(23),p=a(4),x=a(9),m=(a(68),a(11)),O=a.n(m),g=a(22),v=a(21),f=a.n(v),_=a(115),N=a(55),k=a.n(N),w=a(1),y=Object(c.createContext)(),P=function(e){var t=e.reducer,a=e.initialState,n=e.children;return Object(w.jsx)(y.Provider,{value:Object(c.useReducer)(t,a),children:n})},T=function(){return Object(c.useContext)(y)};var C=function(){var e=T(),t=(Object(x.a)(e,2)[1],Object(p.f)(),function(){var e=Object(g.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("/auth/login/facebook");case 2:return e.next=4,f.a.get("/auth/me");case 4:a=e.sent,console.log(a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(w.jsx)(_.a,{variant:"outlined",onClick:t,startIcon:Object(w.jsx)(k.a,{}),children:"Login with Facebook"})},S=a(56),D=a.n(S),B=a(117),L=a(116),F=a(57),R=a.n(F),E=(a(95),function(e){return e.map((function(e){var t,a=e.id.split("_"),c=Object(x.a)(a,2),n=c[0],r=c[1];return{createdTime:e.created_time,message:null!==(t=e.message)&&void 0!==t?t:"",link:"https://www.facebook.com/".concat(n,"/posts/").concat(r)}}))});var I=function(e){var t=e.toggleMode,a=e.search,c=T(),n=Object(x.a)(c,2),r=n[0],s=r.term,i=void 0===s?"":s,l=r.mode,u=r.user,h=r.creationDate,b=r.count,p=n[1],m=function(){var e=Object(g.a)(O.a.mark((function e(){var t,a,c,n,r,s,i,o,l,j,b,x,m;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="&limit=250",a="access_token=".concat(u.accessToken),"https://graph.facebook.com/v11.0/",c="".concat(u.id,"/feed"),n="".concat("https://graph.facebook.com/v11.0/").concat(c,"?").concat(a),e.next=7,fetch(n+t);case 7:return r=e.sent,e.next=10,r.json();case 10:s=e.sent,i=s.data,o=s.paging,l=E(i);case 14:if(!(null===(j=o)||void 0===j?void 0:j.next)){e.next=26;break}return e.next=17,fetch(o.next+t);case 17:return r=e.sent,e.next=20,r.json();case 20:b=e.sent,i=b.data,o=b.paging,l=l.concat(E(i)),e.next=14;break;case 26:return e.prev=26,e.next=29,f.a.post("/posts",{params:{user:u,posts:l,creationDate:h}});case 29:return x=e.sent,e.next=32,f.a.get("/user",{params:u});case 32:m=e.sent,p({type:d,creationDate:m.data.creationDate,count:x}),e.next=39;break;case 36:e.prev=36,e.t0=e.catch(26),console.log(e.t0);case 39:case"end":return e.stop()}}),e,null,[[26,36]])})));return function(){return e.apply(this,arguments)}}();return Object(w.jsxs)("form",{className:"search",onSubmit:a,children:[("linear"===l||"fullText"===l&&h&&b)&&Object(w.jsxs)("div",{className:"search__input",children:[Object(w.jsx)(D.a,{className:"search__inputIcon"}),Object(w.jsx)("input",{type:"text",value:i||"",onChange:function(e){return p({type:o,term:e.target.value})}})]}),t&&Object(w.jsxs)(B.a,{value:l,exclusive:!0,variant:"outlined",style:{width:"100%",justifyContent:"center",margin:"1rem auto"},onChange:function(e,t){p({type:j,mode:t})},children:[Object(w.jsx)(L.a,{value:"linear",children:"Linear Search"}),Object(w.jsx)(L.a,{value:"fullText",children:"Full-text Search"})]}),"fullText"===l&&Object(w.jsxs)("div",{className:"fullTextInfo",style:{display:"flex",width:"auto",justifyContent:"center",margin:"1rem auto"},children:[Object(w.jsx)(_.a,{variant:"outlined",startIcon:Object(w.jsx)(R.a,{}),onClick:m,children:"Upload to DB"}),!h&&Object(w.jsx)("p",{children:"You need to upload your post to the database to use this feature."}),h&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("p",{className:"creationDate",children:["Latest upload time to DB:"," ",new Date(parseInt(h,10)).toLocaleString(navigator.language)]}),Object(w.jsxs)("p",{children:["You have",b," ","posts in your DB."]})]})]})]})};var G=function(){var e=T(),t=Object(x.a)(e,2),a=t[0],c=a.user,n=a.term,r=void 0===n?"":n,s=t[1],i=Object(p.f)();return Object(w.jsx)("div",{className:"home",children:c?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{className:"home__header",children:[Object(w.jsx)("div",{className:"home_headerLeft",children:"About"}),Object(w.jsx)("div",{className:"home__headerRight",children:Object(w.jsx)("p",{children:c.name})})]}),Object(w.jsxs)("div",{className:"home__body",children:[Object(w.jsx)("img",{src:"https://facebookbrand.com/wp-content/uploads/2019/04/f_logo_RGB-Hex-Blue_512.png?w=512&h=512",alt:"logo"}),Object(w.jsx)("div",{className:"home__inputContainer",children:Object(w.jsx)(I,{toggleMode:!0,search:function(e){e.preventDefault(),s({type:o,term:r}),i.push("/search")}})})]})]}):Object(w.jsxs)("div",{className:"home__body",children:[Object(w.jsx)("img",{src:"https://facebookbrand.com/wp-content/uploads/2019/04/f_logo_RGB-Hex-Blue_512.png?w=512&h=512",alt:"logo"}),Object(w.jsxs)("center",{children:[Object(w.jsxs)("p",{children:["Search my post is the web-app that allows to search your post by keyword.",Object(w.jsx)("br",{}),"You can search via linear search without giving any information or full-text search like google."]}),Object(w.jsx)(C,{}),Object(w.jsx)("p",{children:"Privacy Policy"}),Object(w.jsx)("p",{children:"Terms of Service"})]})]})})},H=(a(98),function(e,t){return t.reduce((function(t,a){var c;if(null===a||void 0===a||null===(c=a.message)||void 0===c?void 0:c.includes(e)){var n,r=a.message.indexOf(e),s=a.id.split("_"),i=Object(x.a)(s,2),o=i[0],l=i[1];t.push({createdTime:a.created_time,message:null!==(n=a.message)&&void 0!==n?n:"",link:"https://www.facebook.com/".concat(o,"/posts/").concat(l),snippet:a.message.substring(r-50,r+50)})}return t}),[])});var A=function(){var e=T(),t=Object(x.a)(e,1)[0],a=t.term,n=t.user,r=t.mode,s=Object(c.useState)(null),i=Object(x.a)(s,2),o=i[0],l=i[1],u=Object(c.useState)(null),j=Object(x.a)(u,2),d=j[0],h=j[1],p=Object(c.useState)(null),m=Object(x.a)(p,2),v=m[0],N=m[1],k=function(e){null===e||void 0===e||e.preventDefault(),y("https://graph.facebook.com/v11.0/".concat(n.id,"/feed?access_token=").concat(n.accessToken))},y=function(){var e=Object(g.a)(O.a.mark((function e(t){var c,n,r,s,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t+"&limit=250");case 2:return r=e.sent,e.next=5,r.json();case 5:s=e.sent,i=H(a,s.data),l(i),h({prev:null===(c=s.paging)||void 0===c?void 0:c.prev,next:null===(n=s.paging)||void 0===n?void 0:n.next}),N("About ".concat(null===i||void 0===i?void 0:i.length," result(s) for ").concat(a));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(g.a)(O.a.mark((function e(){var t,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("/search",{params:{term:a,id:n.id}});case 2:c=e.sent,l(c.data),N("About ".concat(null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.length," result(s) for ").concat(a));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){n&&("linear"===r?k():"fullText"===r&&P())}),[]),Object(w.jsx)("div",{className:"searchPage",children:"linear"===r?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{className:"searchPage__header",children:[Object(w.jsx)(b.b,{to:"/",children:Object(w.jsx)("img",{className:"searchPage__logo",src:"https://facebookbrand.com/wp-content/uploads/2019/04/f_logo_RGB-Hex-Blue_512.png?w=512&h=512",alt:""})}),Object(w.jsx)("div",{className:"searchPage__headerBody",children:Object(w.jsx)(I,{search:k})}),Object(w.jsx)("div",{className:"searchPage__headerRight",children:Object(w.jsx)("p",{children:null===n||void 0===n?void 0:n.name})})]}),Object(w.jsxs)("div",{className:"searchPage_results",style:{margin:"2rem"},children:[Object(w.jsx)("p",{className:"searchPage__resultCount",children:v}),null===o||void 0===o?void 0:o.map((function(e,t){return Object(w.jsxs)("div",{className:"searchPage__result",children:[Object(w.jsx)("a",{className:"searchPage__resultTitle",href:e.link,target:"_blank",rel:"noreferrer",children:Object(w.jsx)("h3",{children:e.link})}),Object(w.jsx)("p",{className:"searchPage__resultSnippet",children:e.snippet}),Object(w.jsx)("p",{className:"searchPage__resultCreatedTime",children:new Date(e.createdTime).toLocaleString(navigator.language)})]},t)}))]}),d&&Object(w.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[d.prev&&Object(w.jsx)("div",{className:"searchPage_prev",children:Object(w.jsx)(_.a,{onClick:function(){return y(d.prev)},children:"Prev"})}),d.next&&Object(w.jsx)("div",{className:"searchPage_next",children:Object(w.jsx)(_.a,{onClick:function(){return y(d.next)},children:"Next"})})]})]}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{className:"searchPage__header",children:[Object(w.jsx)(b.b,{to:"/",children:Object(w.jsx)("img",{className:"searchPage__logo",src:"https://facebookbrand.com/wp-content/uploads/2019/04/f_logo_RGB-Hex-Blue_512.png?w=512&h=512",alt:""})}),Object(w.jsx)("div",{className:"searchPage__headerBody",children:Object(w.jsx)(I,{search:P})}),Object(w.jsx)("div",{className:"searchPage__headerRight",children:Object(w.jsx)("p",{children:null===n||void 0===n?void 0:n.name})})]}),Object(w.jsxs)("div",{className:"searchPage_results",style:{margin:"2rem"},children:[Object(w.jsx)("p",{className:"searchPage__resultCount",children:v}),null===o||void 0===o?void 0:o.map((function(e,t){return Object(w.jsxs)("div",{className:"searchPage__result",children:[Object(w.jsx)("a",{className:"searchPage__resultTitle",href:e.link,target:"_blank",rel:"noreferrer",children:Object(w.jsx)("h3",{children:e.link})}),Object(w.jsx)("p",{className:"searchPage__resultSnippet",children:e.snippet}),Object(w.jsx)("p",{className:"searchPage__resultCreatedTime",children:new Date(e.createdTime).toLocaleString(navigator.language)})]},t)}))]})]})})};a(99);var M=function(){return Object(w.jsx)("div",{className:"app",children:Object(w.jsx)(b.a,{children:Object(w.jsxs)(p.c,{children:[Object(w.jsx)(p.a,{path:"/search",children:Object(w.jsx)(A,{})}),Object(w.jsx)(p.a,{exact:!0,path:"/",children:Object(w.jsx)(G,{})})]})})})},Y=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,118)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),c(e),n(e),r(e),s(e)}))};s.a.render(Object(w.jsx)(n.a.StrictMode,{children:Object(w.jsx)(P,{initialState:{term:null,user:null,mode:"linear",creationDate:null,count:null},reducer:h,children:Object(w.jsx)(M,{})})}),document.getElementById("root")),Y()},67:function(e,t,a){},68:function(e,t,a){},95:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){}},[[100,1,2]]]);
//# sourceMappingURL=main.a0744b7b.chunk.js.map