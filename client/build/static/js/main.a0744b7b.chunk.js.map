{"version":3,"sources":["reducer.js","StateProvider.js","components/Login.js","mappingPosts.js","components/Search.js","pages/Home.js","filteredByTerm.js","pages/SearchPage.js","App.js","reportWebVitals.js","index.js"],"names":["actionTypes","reducer","state","action","type","term","user","mode","creationDate","count","StateContext","createContext","StateProvider","initialState","children","Provider","value","useReducer","useStateValue","useContext","Login","onClick","useHistory","e","a","axios","get","response","console","log","Button","variant","startIcon","mappingPosts","data","map","elem","id","split","userLink","postLink","createdTime","created_time","message","link","Search","toggleMode","search","dispatch","upload","LIMIT","accessToken","path","address","fetch","json","paging","posts","next","concat","post","params","responseUser","className","onSubmit","onChange","target","ToggleButtonGroup","exclusive","style","width","justifyContent","margin","_","ToggleButton","display","Date","parseInt","toLocaleString","navigator","language","Home","history","name","src","alt","preventDefault","push","filteredByTerm","reduce","filtered","includes","refPoint","indexOf","snippet","substring","SearchPage","useState","setData","setPaging","resultCount","setResultCount","searchFromFBInitial","searchFromFB","result","filteredData","prev","length","searchFromDB","useEffect","to","item","i","href","rel","App","exact","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a0744b7b.chunk.js","sourcesContent":["export const initialState = {\r\n    term: null,\r\n    user: null,\r\n    mode: 'linear',\r\n    creationDate: null,\r\n    count: null,\r\n}\r\n\r\nexport const actionTypes = {\r\n    SET_SEARCH_TERM: 'SET_SEARCH_TERM',\r\n    LOG_IN: 'LOG_IN',\r\n    LOG_OUT: 'LOG_OUT',\r\n    MODE_CHANGE: 'MODE_CHANGE',\r\n    SET_DB: 'SET_DB',\r\n}\r\n\r\nconst reducer = (state, action) => {\r\n    switch (action.type) {\r\n    case actionTypes.SET_SEARCH_TERM:\r\n        return {\r\n            ...state,\r\n            term: action.term,\r\n        }\r\n    case actionTypes.LOG_IN:\r\n        return {\r\n            ...state,\r\n            user: action.user,\r\n        }\r\n    case actionTypes.LOG_OUT:\r\n        return {\r\n            ...state,\r\n            user: null,\r\n        }\r\n    case actionTypes.MODE_CHANGE:\r\n        return {\r\n            ...state,\r\n            mode: action.mode,\r\n        }\r\n    case actionTypes.SET_DB:\r\n        return {\r\n            ...state,\r\n            creationDate: action.creationDate,\r\n            count: action.count,\r\n        }\r\n\r\n    default:\r\n        return state\r\n    }\r\n}\r\n\r\nexport default reducer\r\n","import React, { createContext, useContext, useReducer } from 'react'\r\n\r\nexport const StateContext = createContext()\r\n\r\nexport const StateProvider = ({ reducer, initialState, children }) => (\r\n    <StateContext.Provider value={useReducer(reducer, initialState)}>\r\n        {children}\r\n    </StateContext.Provider>\r\n)\r\n\r\nexport const useStateValue = () => useContext(StateContext)\r\n","import React from 'react'\r\nimport axios from 'axios'\r\nimport { Button } from '@material-ui/core'\r\nimport FacebookIcon from '@material-ui/icons/Facebook'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { actionTypes } from '../reducer'\r\nimport { useStateValue } from '../StateProvider'\r\n\r\nfunction Login() {\r\n    const [, dispatch] = useStateValue()\r\n    const history = useHistory()\r\n\r\n    const login = async user => {\r\n        dispatch({\r\n            type: actionTypes.LOG_IN,\r\n            user,\r\n        })\r\n        try {\r\n            if (user) {\r\n                const response = await axios.get('/user', { params: user })\r\n                dispatch({\r\n                    type: actionTypes.SET_DB,\r\n                    creationDate: response.data.creationDate,\r\n                    count: response.data.count,\r\n                })\r\n            }\r\n        } catch (err) {\r\n            console.error(err)\r\n        }\r\n        history.push('/')\r\n    }\r\n\r\n    const onClick = async e => {\r\n        await axios.get('/auth/login/facebook')\r\n        const response = await axios.get('/auth/me')\r\n        console.log(response)\r\n    }\r\n\r\n    return (\r\n        <Button\r\n            variant=\"outlined\"\r\n            onClick={onClick}\r\n            startIcon={<FacebookIcon />}\r\n        >\r\n            Login with Facebook\r\n        </Button>\r\n    )\r\n}\r\n\r\nexport default Login\r\n","const mappingPosts = data => data.map(elem => {\r\n    const [userLink, postLink] = elem.id.split('_')\r\n    return ({\r\n        createdTime: elem.created_time,\r\n        message: elem.message ?? '',\r\n        link: `https://www.facebook.com/${userLink}/posts/${postLink}`,\r\n    })\r\n})\r\n\r\nexport default mappingPosts\r\n","import React from 'react'\r\nimport SearchIcon from '@material-ui/icons/Search'\r\nimport axios from 'axios'\r\nimport { Button } from '@material-ui/core'\r\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup'\r\nimport ToggleButton from '@material-ui/lab/ToggleButton'\r\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload'\r\nimport '../styles/Search.css'\r\nimport { useStateValue } from '../StateProvider'\r\nimport { actionTypes } from '../reducer'\r\nimport mappingPosts from '../mappingPosts'\r\n\r\nfunction Search({ toggleMode, search }) {\r\n    const [{\r\n        term = '', mode, user, creationDate, count,\r\n    }, dispatch] = useStateValue()\r\n    const message = 'You need to upload your post to the database to use this feature.'\r\n    const isFulltextSearchable = () => (mode === 'fullText' && creationDate && count)\r\n\r\n    const handleMode = (_, mode) => {\r\n        dispatch({\r\n            type: actionTypes.MODE_CHANGE,\r\n            mode,\r\n        })\r\n    }\r\n\r\n    const upload = async () => {\r\n        const LIMIT = '&limit=250'\r\n        const accessToken = `access_token=${user.accessToken}`\r\n        const host = 'https://graph.facebook.com/v11.0/'\r\n        const path = `${user.id}/feed`\r\n        const address = `${host}${path}?${accessToken}`\r\n        let response = await fetch(address + LIMIT)\r\n        let { data, paging } = await response.json()\r\n        let posts = mappingPosts(data)\r\n        while (paging?.next) {\r\n            // eslint-disable-next-line no-await-in-loop\r\n            response = await fetch(paging.next + LIMIT);\r\n            // eslint-disable-next-line no-await-in-loop\r\n            ({ data, paging } = await response.json())\r\n            posts = posts.concat(mappingPosts(data))\r\n        }\r\n        try {\r\n            const count = await axios.post('/posts', { params: { user, posts, creationDate } })\r\n            const responseUser = await axios.get('/user', { params: user })\r\n            dispatch({\r\n                type: actionTypes.SET_DB,\r\n                creationDate: responseUser.data.creationDate,\r\n                count,\r\n            })\r\n        } catch (err) {\r\n            console.log(err)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <form className=\"search\" onSubmit={search}>\r\n            {(mode === 'linear' || isFulltextSearchable()) && (\r\n                <div className=\"search__input\">\r\n                    <SearchIcon className=\"search__inputIcon\" />\r\n                    <input\r\n                        type=\"text\"\r\n                        value={term || ''}\r\n                        onChange={e => dispatch({\r\n                            type: actionTypes.SET_SEARCH_TERM,\r\n                            term: e.target.value,\r\n                        })}\r\n                    />\r\n                </div>\r\n            )}\r\n            {toggleMode && (\r\n                <ToggleButtonGroup value={mode} exclusive variant=\"outlined\" style={{ width: '100%', justifyContent: 'center', margin: '1rem auto' }} onChange={handleMode}>\r\n                    <ToggleButton value=\"linear\">Linear Search</ToggleButton>\r\n                    <ToggleButton value=\"fullText\">Full-text Search</ToggleButton>\r\n                </ToggleButtonGroup>\r\n            )}\r\n            {mode === 'fullText' && (\r\n                <div\r\n                    className=\"fullTextInfo\"\r\n                    style={\r\n                        {\r\n                            display: 'flex',\r\n                            width: 'auto',\r\n                            justifyContent: 'center',\r\n                            margin: '1rem auto',\r\n                        }\r\n                    }\r\n                >\r\n                    <Button\r\n                        variant=\"outlined\"\r\n                        startIcon={<CloudUploadIcon />}\r\n                        onClick={upload}\r\n                    >\r\n                        Upload to DB\r\n                    </Button>\r\n                    {!creationDate && (\r\n                        <p>{message}</p>\r\n                    )}\r\n                    {creationDate && (\r\n                        <>\r\n                            <p className=\"creationDate\">\r\n                                Latest upload time to DB:\r\n                                {' '}\r\n                                {new Date(parseInt(creationDate, 10))\r\n                                    .toLocaleString(navigator.language)}\r\n                            </p>\r\n                            <p>\r\n                                You have\r\n                                {count}\r\n                                {' '}\r\n                                posts in your DB.\r\n                            </p>\r\n                        </>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default Search\r\n","import React from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport '../styles/Home.css'\r\nimport Login from '../components/Login'\r\nimport Search from '../components/Search'\r\nimport { useStateValue } from '../StateProvider'\r\nimport { actionTypes } from '../reducer'\r\n\r\nfunction Home() {\r\n    const [{ user, term = '' }, dispatch] = useStateValue()\r\n    const history = useHistory()\r\n\r\n    const message1 = 'Search my post is the web-app that allows to search your post by keyword.'\r\n    const message2 = 'You can search via linear search without giving any information or full-text search like google.'\r\n    return (\r\n        <div className=\"home\">\r\n            {user ? (\r\n                <>\r\n                    <div className=\"home__header\">\r\n                        <div className=\"home_headerLeft\">\r\n                            About\r\n                        </div>\r\n                        <div className=\"home__headerRight\">\r\n                            <p>{ user.name }</p>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"home__body\">\r\n                        <img\r\n                            src=\"https://facebookbrand.com/wp-content/uploads/2019/04/f_logo_RGB-Hex-Blue_512.png?w=512&h=512\"\r\n                            alt=\"logo\"\r\n                        />\r\n                        <div className=\"home__inputContainer\">\r\n                            <Search\r\n                                toggleMode\r\n                                search={e => {\r\n                                    e.preventDefault()\r\n                                    dispatch({\r\n                                        type: actionTypes.SET_SEARCH_TERM,\r\n                                        term,\r\n                                    })\r\n                                    history.push(`/search`)\r\n                                }}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </>\r\n            ) : (\r\n                <div className=\"home__body\">\r\n                    <img\r\n                        src=\"https://facebookbrand.com/wp-content/uploads/2019/04/f_logo_RGB-Hex-Blue_512.png?w=512&h=512\"\r\n                        alt=\"logo\"\r\n                    />\r\n                    <center>\r\n                        <p>\r\n                            {message1}\r\n                            <br />\r\n                            {message2}\r\n                        </p>\r\n                        <Login />\r\n                        <p>Privacy Policy</p>\r\n                        <p>Terms of Service</p>\r\n                    </center>\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Home\r\n","const filteredByTerm = (term, data) => data.reduce((filtered, elem) => {\r\n    if (elem?.message?.includes(term)) {\r\n        const refPoint = elem.message.indexOf(term)\r\n        const [userLink, postLink] = elem.id.split('_')\r\n        filtered.push({\r\n            createdTime: elem.created_time,\r\n            message: elem.message ?? '',\r\n            link: `https://www.facebook.com/${userLink}/posts/${postLink}`,\r\n            snippet: elem.message.substring(refPoint - 50, refPoint + 50),\r\n        })\r\n    }\r\n    return filtered\r\n}, [])\r\n\r\nexport default filteredByTerm\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { Button } from '@material-ui/core'\r\nimport axios from 'axios'\r\n\r\nimport '../styles/SearchPage.css'\r\n\r\nimport { useStateValue } from '../StateProvider'\r\nimport Search from '../components/Search'\r\nimport filteredByTerm from '../filteredByTerm'\r\n\r\nfunction SearchPage() {\r\n    const LIMIT = '&limit=250'\r\n    const [{ term, user, mode }] = useStateValue()\r\n    const [data, setData] = useState(null)\r\n    const [paging, setPaging] = useState(null)\r\n    const [resultCount, setResultCount] = useState(null)\r\n    const searchFromFBInitial = e => {\r\n        e?.preventDefault()\r\n        searchFromFB(`https://graph.facebook.com/v11.0/${user.id}/feed?access_token=${user.accessToken}`)\r\n    }\r\n    const searchFromFB = async address => {\r\n        const response = await fetch(address + LIMIT)\r\n        const result = await response.json()\r\n        const filteredData = filteredByTerm(term, result.data)\r\n        setData(filteredData)\r\n        setPaging({ prev: result.paging?.prev, next: result.paging?.next })\r\n        setResultCount(`About ${filteredData?.length} result(s) for ${term}`)\r\n    }\r\n\r\n    const searchFromDB = async () => {\r\n        const response = await axios.get('/search', { params: { term, id: user.id } })\r\n        setData(response.data)\r\n        setResultCount(`About ${response?.data?.length} result(s) for ${term}`)\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (user) {\r\n            if (mode === 'linear') {\r\n                searchFromFBInitial()\r\n            } else if (mode === 'fullText') {\r\n                searchFromDB()\r\n            }\r\n        }\r\n    }, [])\r\n\r\n    return (\r\n        <div className=\"searchPage\">\r\n            { mode === 'linear' ? (\r\n                <>\r\n                    <div className=\"searchPage__header\">\r\n                        <Link to=\"/\">\r\n                            <img\r\n                                className=\"searchPage__logo\"\r\n                                src=\"https://facebookbrand.com/wp-content/uploads/2019/04/f_logo_RGB-Hex-Blue_512.png?w=512&h=512\"\r\n                                alt=\"\"\r\n                            />\r\n                        </Link>\r\n                        <div className=\"searchPage__headerBody\">\r\n                            <Search search={searchFromFBInitial} />\r\n                        </div>\r\n                        <div className=\"searchPage__headerRight\">\r\n                            <p>{ user?.name }</p>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"searchPage_results\" style={{ margin: '2rem' }}>\r\n                        <p className=\"searchPage__resultCount\">\r\n                            {resultCount}\r\n                        </p>\r\n\r\n                        {data?.map((item, i) => (\r\n                            <div key={i} className=\"searchPage__result\">\r\n                                <a className=\"searchPage__resultTitle\" href={item.link} target=\"_blank\" rel=\"noreferrer\">\r\n                                    <h3>{item.link}</h3>\r\n                                </a>\r\n                                <p className=\"searchPage__resultSnippet\">\r\n                                    {item.snippet}\r\n                                </p>\r\n                                <p className=\"searchPage__resultCreatedTime\">\r\n                                    {new Date(item.createdTime).toLocaleString(navigator.language)}\r\n                                </p>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                    {paging && (\r\n                        <div style={{ display: 'flex', justifyContent: 'center' }}>\r\n                            {paging.prev && (\r\n                                <div className=\"searchPage_prev\">\r\n                                    <Button onClick={() => searchFromFB(paging.prev)}>Prev</Button>\r\n                                </div>\r\n                            )}\r\n                            {paging.next && (\r\n                                <div className=\"searchPage_next\">\r\n                                    <Button onClick={() => searchFromFB(paging.next)}>Next</Button>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </>\r\n            ) : (\r\n                <>\r\n                    <div className=\"searchPage__header\">\r\n                        <Link to=\"/\">\r\n                            <img\r\n                                className=\"searchPage__logo\"\r\n                                src=\"https://facebookbrand.com/wp-content/uploads/2019/04/f_logo_RGB-Hex-Blue_512.png?w=512&h=512\"\r\n                                alt=\"\"\r\n                            />\r\n                        </Link>\r\n                        <div className=\"searchPage__headerBody\">\r\n                            <Search search={searchFromDB} />\r\n                        </div>\r\n                        <div className=\"searchPage__headerRight\">\r\n                            <p>{ user?.name }</p>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"searchPage_results\" style={{ margin: '2rem' }}>\r\n                        <p className=\"searchPage__resultCount\">\r\n                            {resultCount}\r\n                        </p>\r\n\r\n                        {data?.map((item, i) => (\r\n                            <div key={i} className=\"searchPage__result\">\r\n                                <a className=\"searchPage__resultTitle\" href={item.link} target=\"_blank\" rel=\"noreferrer\">\r\n                                    <h3>{item.link}</h3>\r\n                                </a>\r\n                                <p className=\"searchPage__resultSnippet\">\r\n                                    {item.snippet}\r\n                                </p>\r\n                                <p className=\"searchPage__resultCreatedTime\">\r\n                                    {new Date(item.createdTime).toLocaleString(navigator.language)}\r\n                                </p>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SearchPage\r\n","import React from 'react'\r\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom'\r\nimport Home from './pages/Home'\r\nimport SearchPage from './pages/SearchPage'\r\n\r\nimport './styles/App.css'\r\n\r\nfunction App() {\r\n    return (\r\n        <div className=\"app\">\r\n            <Router>\r\n                <Switch>\r\n                    <Route path=\"/search\">\r\n                        <SearchPage />\r\n                    </Route>\r\n                    <Route exact path=\"/\">\r\n                        <Home />\r\n                    </Route>\r\n                </Switch>\r\n            </Router>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default App\r\n","const reportWebVitals = onPerfEntry => {\r\n    if (onPerfEntry && onPerfEntry instanceof Function) {\r\n        import('web-vitals').then(({\r\n            getCLS, getFID, getFCP, getLCP, getTTFB,\r\n        }) => {\r\n            getCLS(onPerfEntry)\r\n            getFID(onPerfEntry)\r\n            getFCP(onPerfEntry)\r\n            getLCP(onPerfEntry)\r\n            getTTFB(onPerfEntry)\r\n        })\r\n    }\r\n}\r\n\r\nexport default reportWebVitals\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './styles/index.css'\r\nimport reducer, { initialState } from './reducer'\r\nimport App from './App'\r\nimport reportWebVitals from './reportWebVitals'\r\nimport { StateProvider } from './StateProvider'\r\n\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n        <StateProvider\r\n            initialState={initialState}\r\n            reducer={reducer}\r\n        >\r\n            <App />\r\n        </StateProvider>\r\n    </React.StrictMode>,\r\n    document.getElementById('root'),\r\n)\r\n\r\nreportWebVitals()\r\n"],"sourceRoot":""}